name: Governance Enforcement

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  enforce-governance:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install Dependencies
        run: |
          python -m pip install --upgrade pip
          pip install cryptography jsonschema

      - name: Run Governance Validator
        run: |
          python system/validator_agent.py --full-check

      - name: Verify Digital Signatures
        run: |
          python system/signature_manager.py --verify

      - name: Validate Task Registry
        run: |
          python system/task_engine.py --validate-registry

      - name: Audit Attribution & License
        run: |
          # This is internally handled by the validator_agent.py during --full-check
          echo "Attribution and license audit complete."
